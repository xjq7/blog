[[toc]]

## React 18

18 带来的更新

- 并发模式
- 更新 render API
- 自动批处理
- Suspense 支持 SSR
- startTransition
- useTransition
- useDeferredValue
- useId
- 提供给 第三方库的 Hook

## JSX

JSX 是 JS 语法的扩展, 可以编写 类 HTML 的代码

提高了代码可读性与开发效率

## 生命周期

## 合成事件

React 在内部对事件做了统一的处理

1. 合成事件抹平了浏览器兼容性差异
2. React 通过顶层监听的形式，通过事件委托的方式来统一管理所有的事件，可以在事件上区分事件优先级

## React Hooks

## fiber 架构

## React 错误捕获

## diff 算法

计算出 Virtual DOM 中真正变化的部分，并只针对该部分进行原生 DOM 操作，而非重新渲染整个页面

把树形结构按照层级分解，只比较同级元素

### tree diff

两棵树只对同一层级节点进行比较，只要该节点不存在了，那么该节点与其所有子节点会被完全删除,不在进行进一步比较
只需要遍历一次，便完成对整个 DOM 树的比较

### component diff

同类型组件，组件 A 转化为了组件 B，如果 virtual DOM 无变化，可以通过 shouldComponentUpdate()方法优化
不同类型的组件，那么 diff 算法会把要改变的组件判断为 dirty component,从而替换整个组件的所有节点

### element diff

key 往前移动的节点不进行任何操作，所以当把最后一个节点移动到头部时，性能损耗最大

- 插入: 新的组件不在原来的集合中，而是全新的节点，则对集合进行插入操作
- 删除: 组件已经在集合中，但集合已经更新，此时节点就需要删除
- 移动: 组件已经存在于集合中，并且集合更新时，组件并没有发生更新，只是位置发生改变(同一层的节点添加唯一 key 进行区分，并且移动,当新集合中位置在旧集合之后时,需要移动)
